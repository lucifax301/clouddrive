<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.liliyun.student.mapper.StudentMapper">
    <resultMap id="BaseResultMap" type="cn.com.liliyun.student.model.Student">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="stunum" property="stunum" jdbcType="VARCHAR"/>
        <result column="inscode" property="inscode" jdbcType="CHAR"/>
        <result column="cardtype" property="cardtype" jdbcType="VARCHAR"/>
        <result column="idcard" property="idcard" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="sex" property="sex" jdbcType="VARCHAR"/>
        <result column="qq" property="qq" jdbcType="VARCHAR"/>
        <result column="height" property="height" jdbcType="INTEGER"/>
        <result column="nationality" property="nationality" jdbcType="INTEGER"/>
        <result column="phone" property="phone" jdbcType="VARCHAR"/>
        <result column="residence" property="residence" jdbcType="INTEGER"/>
        <result column="residencedate" property="residencedate" jdbcType="DATE"/>
        <result column="address" property="address" jdbcType="VARCHAR"/>
        <result column="photo" property="photo" jdbcType="INTEGER"/>
        <result column="flownum" property="flownum" jdbcType="VARCHAR"/>
        <result column="photoback" property="photoback" jdbcType="VARCHAR"/>
        <result column="birthday" property="birthday" jdbcType="TIMESTAMP"/>
        <result column="fingerprint" property="fingerprint" jdbcType="INTEGER"/>
        <result column="busitype" property="busitype" jdbcType="VARCHAR"/>
        <result column="drilicnum" property="drilicnum" jdbcType="VARCHAR"/>
        <result column="perdritype" property="perdritype" jdbcType="VARCHAR"/>
        <result column="fstdrilicdate" property="fstdrilicdate" jdbcType="TIMESTAMP"/>
        <result column="traintype" property="traintype" jdbcType="VARCHAR"/>
        <result column="applydate" property="applydate" jdbcType="TIMESTAMP"/>
        <result column="completetime" property="completetime" jdbcType="INTEGER"/>
        <result column="recordtype" property="recordtype" jdbcType="INTEGER"/>
        <result column="applyexam" property="applyexam" jdbcType="INTEGER"/>
        <result column="applystatus" property="applystatus" jdbcType="INTEGER"/>
        <result column="applytype" property="applytype" jdbcType="INTEGER"/>
        <result column="contract" property="contract" jdbcType="VARCHAR"/>
        <result column="operate" property="operate" jdbcType="INTEGER"/>
        <result column="errorcode" property="errorcode" jdbcType="INTEGER"/>
        <result column="message" property="message" jdbcType="VARCHAR"/>
        <result column="utime" property="utime" jdbcType="TIMESTAMP"/>
        <result column="ltime" property="ltime" jdbcType="TIMESTAMP"/>
        <result column="cuid" property="cuid" jdbcType="INTEGER"/>
        <result column="muid" property="muid" jdbcType="INTEGER"/>
        <result column="ctime" property="ctime" jdbcType="TIMESTAMP"/>
        <result column="mtime" property="mtime" jdbcType="TIMESTAMP"/>
        <result column="photourl" property="photourl" jdbcType="VARCHAR"/>
        <result column="fingerprinturl" property="fingerprinturl" jdbcType="VARCHAR"/>
        <result column="trainmethod" property="trainmethod" jdbcType="VARCHAR"/>
        <result column="classid" property="classid" jdbcType="INTEGER"/>
        <result column="payway" property="payway" jdbcType="INTEGER"/>
        <result column="paytype" property="paytype" jdbcType="INTEGER"/>
        <result column="payremark" property="payremark" jdbcType="VARCHAR"/>
        <result column="paydate" property="paydate" jdbcType="TIMESTAMP"/>
        <result column="paystatus" property="paystatus" jdbcType="INTEGER"/>
        <result column="activityid" property="activityid" jdbcType="INTEGER"/>
        <result column="submoney" property="submoney" jdbcType="DECIMAL"/>
        <result column="posmoney" property="posmoney" jdbcType="DECIMAL"/>
        <result column="cashmoney" property="cashmoney" jdbcType="DECIMAL"/>
        <result column="contractmoney" property="contractmoney" jdbcType="DECIMAL"/>
        <result column="signmoney" property="signmoney" jdbcType="DECIMAL"/>
        <result column="isvalid" property="isvalid" jdbcType="INTEGER"/>
        <result column="areaid" property="areaid" jdbcType="INTEGER"/>
        <result column="storeid" property="storeid" jdbcType="INTEGER"/>
        <result column="checktime" property="checktime" jdbcType="TIMESTAMP"/>
        <result column="checkstatus" property="checkstatus" jdbcType="INTEGER"/>
        <result column="bussource" property="bussource" jdbcType="INTEGER"/>
        <result column="isinternal" property="isinternal" jdbcType="INTEGER"/>
        <result column="infosource" property="infosource" jdbcType="INTEGER"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="billname" property="billname" jdbcType="VARCHAR"/>
        <result column="billnum" property="billnum" jdbcType="VARCHAR"/>
        <result column="billtype" property="billtype" jdbcType="INTEGER"/>
        <result column="posnum" property="posnum" jdbcType="VARCHAR"/>
        <result column="couponnum" property="couponnum" jdbcType="VARCHAR"/>
        <result column="couponmoney" property="couponmoney" jdbcType="DECIMAL"/>
        <result column="carddate" property="carddate" jdbcType="TIMESTAMP"/>
        <result column="recuid" property="recuid" jdbcType="INTEGER"/>
        <result column="recname" property="recname" jdbcType="VARCHAR"/>
        <result column="stabletime" property="stabletime" jdbcType="TIMESTAMP"/>
        <result column="etabletime" property="etabletime" jdbcType="TIMESTAMP"/>
        <result column="learnstatus" property="learnstatus" jdbcType="INTEGER"/>
        <result column="islocal" property="islocal" jdbcType="INTEGER"/>
        <result column="iccard" property="iccard" jdbcType="VARCHAR"/>
        <result column="cname" property="cname" jdbcType="VARCHAR"/>
        <result column="mname" property="mname" jdbcType="VARCHAR"/>
        <result column="reccoachid" property="reccoachid" jdbcType="INTEGER"/>
        <result column="reccoachname" property="reccoachname" jdbcType="VARCHAR"/>
        <result column="channel" property="channel" jdbcType="INTEGER"/>
        <result column="learncard" property="learncard" jdbcType="VARCHAR"/>
        <result column="xid" property="xid" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="Base_Column_List">
		id, stunum, inscode, cardtype, idcard, name, sex, qq, height, nationality, phone,
        residence, residencedate, address, photo, flownum, photoback, birthday, fingerprint,
        busitype, drilicnum, perdritype, fstdrilicdate, traintype, applydate, completetime,
        recordtype, applyexam, applystatus, applytype, contract, operate, errorcode, message, utime, ltime,
        cuid, muid, ctime, mtime, photourl, fingerprinturl, trainmethod, classid, payway,
        paytype, payremark, paydate, paystatus, activityid, signmoney, submoney, posmoney, cashmoney,
        contractmoney, isvalid, areaid, storeid, checktime, checkstatus, bussource, isinternal,
        infosource, remark, billname, billnum, billtype, posnum, couponnum, couponmoney,
        carddate, recuid, recname, stabletime, etabletime, learnstatus, islocal, iccard,
        cname, mname, reccoachid, reccoachname, channel, learncard, xid
	</sql>

    <sql id="Theory_Export_Column">
		stunum, name, phone, sex, traintype, idcard, flownum, applyexam
	</sql>
    <select id="selectByPrimaryKey" parameterType="cn.com.liliyun.student.model.Student"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_student
        where id = #{id,jdbcType=INTEGER}
    </select>

    <select id="selectList" parameterType="cn.com.liliyun.student.model.Student"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_student where 1 = 1
        <if test="name != null and name != ''">
            and name = #{name}
        </if>
        <if test="phone != null and phone != ''">
            and phone = #{phone}
        </if>
        <if test="idcard != null and idcard != ''">
            and idcard = #{idcard}
        </if>
        <if test="flownum != null and flownum != ''">
            and flownum = #{flownum}
        </if>
        <if test="areaid != null">
            and areaid = #{areaid}
        </if>
        <if test="storeid != null">
            and storeid = #{storeid}
        </if>
        <if test="checkstatus != null">
            and checkstatus = #{checkstatus}
        </if>
        <if test="applyexam != null">
            and applyexam = #{applyexam}
        </if>
        <if test="classid != null">
            and classid = #{classid}
        </if>
        <if test="stime != null and stime != ''">
        and applydate >= #{stime}
    </if>
        <if test="etime != null and etime != ''">
            <![CDATA[ and applydate <= #{etime} ]]>
        </if>
        <if test="learnstatus !=null">
            and learnstatus = #{learnstatus}
        </if>
        <if test="activityid !=null">
            and activityid = #{activityid}
        </if>
        <if test="domain !=null">
            <if test="domain.storeid !=null ">
                and storeid=#{domain.storeid}
            </if>
            <if test="domain.areaid !=null ">
                and areaid=#{domain.areaid}
            </if>
        </if>
        order by mtime desc
    </select>

    <select id="selectEnrolList" parameterType="cn.com.liliyun.student.model.Student"
            resultType="cn.com.liliyun.student.model.Student">
        select

        a.*,b.activityname as activity

        from t_student a join t_sales_activity b on a.activityid=b.id where 1 = 1
        <if test="name != null and name != ''">
            and name LIKE concat(concat('%',#{name}),'%')
        </if>
        <if test="phone != null and phone != ''">
            and phone = #{phone}
        </if>
        <if test="idcard != null and idcard != ''">
            and idcard = #{idcard}
        </if>
        <if test="flownum != null and flownum != ''">
            and flownum = #{flownum}
        </if>
        <if test="areaid != null">
            and a.areaid = #{areaid}
        </if>
        <if test="storeid != null">
            and a.storeid = #{storeid}
        </if>
        <if test="checkstatus != null">
            and checkstatus = #{checkstatus}
        </if>
        <if test="applyexam != null">
            and applyexam = #{applyexam}
        </if>
        <if test="classid != null">
            and classid = #{classid}
        </if>
        <if test="stime != null and stime != ''">
            and applydate >= #{stime}
        </if>
        <if test="etime != null and etime != ''">
            <![CDATA[ and applydate <= #{etime} ]]>
        </if>
        <if test="learnstatus !=null">
            and learnstatus = #{learnstatus}
        </if>
        <if test="activityid !=null">
            and activityid = #{activityid}
        </if>
        order by mtime desc
    </select>

    <select id="getClassStudentCount" parameterType="cn.com.liliyun.student.model.Student"
            resultType="int">
		select id from t_student where 
		classid=#{classid}
		limit 1
		
	</select>


    <sql id="Example_Where_Clause">
        where 1=1
        <trim suffixOverrides=",">
            <if test="learnstatus != null ">
                and learnstatus = #{learnstatus}
            </if>
            <if test="name != null and name != ''">
                and name = #{name}
            </if>
            <if test="phone != null and phone != ''">
                and phone = #{phone}
            </if>
            <if test="idcard != null and idcard != ''">
                and idcard = #{idcard}
            </if>
            <if test="areaid != null">
                and areaid = #{areaid}
            </if>
            <if test="storeid != null">
                and storeid = #{storeid}
            </if>
        </trim>
    </sql>

    <select id="selectOne" parameterType="cn.com.liliyun.student.model.Student" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_student
        <where>
            <if test="areaid != null">
                and areaid = #{areaid}
            </if>
            <if test="storeid != null">
                and storeid = #{storeid}
            </if>
            <choose>
                <when test="idcard != null">
                    and idcard = #{idcard,jdbcType=VARCHAR}
                </when>
                <when test="name != null and name !=''">
                    and name = #{name}
                </when>
                <otherwise>
                    and id = #{id,jdbcType=INTEGER}
                </otherwise>
            </choose>
        </where>
        limit 1
    </select>

    <delete id="deleteByPrimaryKey" parameterType="cn.com.liliyun.student.model.Student">
		delete from t_student
		where id = #{id,jdbcType=INTEGER}
	</delete>
    <insert id="insert" parameterType="cn.com.liliyun.student.model.Student"
            useGeneratedKeys="true" keyProperty="id">
		 insert into t_student (id, stunum, inscode,
      cardtype, idcard, name,
      sex, qq, height, nationality,
      phone, residence, residencedate,
      address, photo, flownum,
      photoback, birthday, fingerprint,
      busitype, drilicnum, perdritype,
      fstdrilicdate, traintype, applydate,
      completetime, recordtype, applyexam,applystatus,
      applytype, contract, operate,
      errorcode, message, utime,
      ltime, cuid, muid,
      ctime, mtime, photourl,
      fingerprinturl, trainmethod, classid,
      payway, paytype, payremark,
      paydate, paystatus, activityid,
      submoney, posmoney, cashmoney,
      contractmoney, isvalid, areaid,
      storeid, checktime, checkstatus,
      bussource, isinternal, infosource,
      remark, billname, billnum,
      billtype, posnum, couponnum,
      couponmoney, carddate, recuid,
      recname, stabletime, etabletime,
      learnstatus, islocal, iccard,
      cname, mname, reccoachid,
      reccoachname, channel,
      learncard, xid)
    values (#{id,jdbcType=INTEGER}, #{stunum,jdbcType=VARCHAR}, #{inscode,jdbcType=CHAR},
      #{cardtype,jdbcType=VARCHAR}, #{idcard,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR},
      #{sex,jdbcType=VARCHAR}, #{qq,jdbcType=VARCHAR}, #{height,jdbcType=INTEGER}, #{nationality,jdbcType=INTEGER},
      #{phone,jdbcType=VARCHAR}, #{residence,jdbcType=INTEGER}, #{residencedate,jdbcType=DATE},
      #{address,jdbcType=VARCHAR}, #{photo,jdbcType=INTEGER}, #{flownum,jdbcType=VARCHAR},
      #{photoback,jdbcType=VARCHAR}, #{birthday,jdbcType=TIMESTAMP}, #{fingerprint,jdbcType=INTEGER},
      #{busitype,jdbcType=VARCHAR}, #{drilicnum,jdbcType=VARCHAR}, #{perdritype,jdbcType=VARCHAR},
      #{fstdrilicdate,jdbcType=TIMESTAMP}, #{traintype,jdbcType=VARCHAR}, #{applydate,jdbcType=TIMESTAMP},
      #{completetime,jdbcType=INTEGER}, #{recordtype,jdbcType=INTEGER}, #{applyexam,jdbcType=INTEGER}, #{applystatus,jdbcType=INTEGER},
      #{applytype,jdbcType=INTEGER}, #{contract,jdbcType=VARCHAR}, #{operate,jdbcType=INTEGER},
      #{errorcode,jdbcType=INTEGER}, #{message,jdbcType=VARCHAR}, #{utime,jdbcType=TIMESTAMP},
      #{ltime,jdbcType=TIMESTAMP}, #{cuid,jdbcType=INTEGER}, #{muid,jdbcType=INTEGER},
      #{ctime,jdbcType=TIMESTAMP}, #{mtime,jdbcType=TIMESTAMP}, #{photourl,jdbcType=VARCHAR},
      #{fingerprinturl,jdbcType=VARCHAR}, #{trainmethod,jdbcType=VARCHAR}, #{classid,jdbcType=INTEGER},
      #{payway,jdbcType=INTEGER}, #{paytype,jdbcType=INTEGER}, #{payremark,jdbcType=VARCHAR},
      #{paydate,jdbcType=TIMESTAMP}, #{paystatus,jdbcType=INTEGER}, #{activityid,jdbcType=INTEGER},
      #{submoney,jdbcType=DECIMAL}, #{posmoney,jdbcType=DECIMAL}, #{cashmoney,jdbcType=DECIMAL},
      #{contractmoney,jdbcType=DECIMAL}, #{isvalid,jdbcType=INTEGER}, #{areaid,jdbcType=INTEGER},
      #{storeid,jdbcType=INTEGER}, #{checktime,jdbcType=TIMESTAMP}, #{checkstatus,jdbcType=INTEGER},
      #{bussource,jdbcType=INTEGER}, #{isinternal,jdbcType=INTEGER}, #{infosource,jdbcType=INTEGER},
      #{remark,jdbcType=VARCHAR}, #{billname,jdbcType=VARCHAR}, #{billnum,jdbcType=VARCHAR},
      #{billtype,jdbcType=INTEGER}, #{posnum,jdbcType=VARCHAR}, #{couponnum,jdbcType=VARCHAR},
      #{couponmoney,jdbcType=DECIMAL}, #{carddate,jdbcType=TIMESTAMP}, #{recuid,jdbcType=INTEGER},
      #{recname,jdbcType=VARCHAR}, #{stabletime,jdbcType=TIMESTAMP}, #{etabletime,jdbcType=TIMESTAMP},
      #{learnstatus,jdbcType=INTEGER}, #{islocal,jdbcType=INTEGER}, #{iccard,jdbcType=VARCHAR},
      #{cname,jdbcType=VARCHAR}, #{mname,jdbcType=VARCHAR}, #{reccoachid,jdbcType=INTEGER},
      #{reccoachname,jdbcType=VARCHAR}, #{channel,jdbcType=INTEGER},
      #{learncard,jdbcType=VARCHAR}, #{xid,jdbcType=INTEGER})
	</insert>
    <insert id="insertSelective" parameterType="cn.com.liliyun.student.model.Student"
            useGeneratedKeys="true" keyProperty="id">
        insert into t_student
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="stunum != null">
                stunum,
            </if>
            <if test="inscode != null">
                inscode,
            </if>
            <if test="cardtype != null">
                cardtype,
            </if>
            <if test="idcard != null">
                idcard,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="sex != null">
                sex,
            </if>
            <if test="qq != null">
                qq,
            </if>
            <if test="height != null">
                height,
            </if>
            <if test="nationality != null">
                nationality,
            </if>
            <if test="phone != null">
                phone,
            </if>
            <if test="residence != null">
                residence,
            </if>
            <if test="residencedate != null">
                residencedate,
            </if>
            <if test="address != null">
                address,
            </if>
            <if test="photo != null">
                photo,
            </if>
            <if test="flownum != null">
                flownum,
            </if>
            <if test="photoback != null">
                photoback,
            </if>
            <if test="birthday != null">
                birthday,
            </if>
            <if test="fingerprint != null">
                fingerprint,
            </if>
            <if test="busitype != null">
                busitype,
            </if>
            <if test="drilicnum != null">
                drilicnum,
            </if>
            <if test="perdritype != null">
                perdritype,
            </if>
            <if test="fstdrilicdate != null">
                fstdrilicdate,
            </if>
            <if test="traintype != null">
                traintype,
            </if>
            <if test="applydate != null">
                applydate,
            </if>
            <if test="completetime != null">
                completetime,
            </if>
            <if test="recordtype != null">
                recordtype,
            </if>
            <if test="applyexam != null">
                applyexam,
            </if>
            <if test="applystatus != null">
                applystatus,
            </if>
            <if test="applytype != null">
                applytype,
            </if>
            <if test="contract != null">
                contract,
            </if>
            <if test="operate != null">
                operate,
            </if>
            <if test="errorcode != null">
                errorcode,
            </if>
            <if test="message != null">
                message,
            </if>
            <if test="utime != null">
                utime,
            </if>
            <if test="ltime != null">
                ltime,
            </if>
            <if test="cuid != null">
                cuid,
            </if>
            <if test="muid != null">
                muid,
            </if>
            <if test="ctime != null">
                ctime,
            </if>
            <if test="mtime != null">
                mtime,
            </if>
            <if test="photourl != null">
                photourl,
            </if>
            <if test="fingerprinturl != null">
                fingerprinturl,
            </if>
            <if test="trainmethod != null">
                trainmethod,
            </if>
            <if test="classid != null">
                classid,
            </if>
            <if test="payway != null">
                payway,
            </if>
            <if test="paytype != null">
                paytype,
            </if>
            <if test="payremark != null">
                payremark,
            </if>
            <if test="paydate != null">
                paydate,
            </if>
            <if test="paystatus != null">
                paystatus,
            </if>
            <if test="activityid != null">
                activityid,
            </if>
            <if test="submoney != null">
                submoney,
            </if>
            <if test="posmoney != null">
                posmoney,
            </if>
            <if test="cashmoney != null">
                cashmoney,
            </if>
            <if test="contractmoney != null">
                contractmoney,
            </if>
            <if test="isvalid != null">
                isvalid,
            </if>
            <if test="areaid != null">
                areaid,
            </if>
            <if test="storeid != null">
                storeid,
            </if>
            <if test="checktime != null">
                checktime,
            </if>
            <if test="checkstatus != null">
                checkstatus,
            </if>
            <if test="bussource != null">
                bussource,
            </if>
            <if test="isinternal != null">
                isinternal,
            </if>
            <if test="infosource != null">
                infosource,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="billname != null">
                billname,
            </if>
            <if test="billnum != null">
                billnum,
            </if>
            <if test="billtype != null">
                billtype,
            </if>
            <if test="posnum != null">
                posnum,
            </if>
            <if test="couponnum != null">
                couponnum,
            </if>
            <if test="couponmoney != null">
                couponmoney,
            </if>
            <if test="signmoney != null">
                signmoney,
            </if>
            <if test="carddate != null">
                carddate,
            </if>
            <if test="recuid != null">
                recuid,
            </if>
            <if test="recname != null">
                recname,
            </if>
            <if test="stabletime != null">
                stabletime,
            </if>
            <if test="etabletime != null">
                etabletime,
            </if>
            <if test="learnstatus != null">
                learnstatus,
            </if>
            <if test="islocal != null">
                islocal,
            </if>
            <if test="iccard != null">
                iccard,
            </if>
            <if test="cname != null">
                cname,
            </if>
            <if test="mname != null">
                mname,
            </if>
            <if test="reccoachid != null">
                reccoachid,
            </if>
            <if test="reccoachname != null">
                reccoachname,
            </if>
            <if test="channel != null">
                channel,
            </if>
            <if test="learncard != null">
                learncard,
            </if>
            <if test="xid != null">
                xid,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="stunum != null">
                #{stunum,jdbcType=VARCHAR},
            </if>
            <if test="inscode != null">
                #{inscode,jdbcType=CHAR},
            </if>
            <if test="cardtype != null">
                #{cardtype,jdbcType=VARCHAR},
            </if>
            <if test="idcard != null">
                #{idcard,jdbcType=VARCHAR},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                #{sex,jdbcType=VARCHAR},
            </if>
            <if test="qq != null">
                #{qq,jdbcType=VARCHAR},
            </if>
            <if test="height != null">
                #{height,jdbcType=INTEGER},
            </if>
            <if test="nationality != null">
                #{nationality,jdbcType=INTEGER},
            </if>
            <if test="phone != null">
                #{phone,jdbcType=VARCHAR},
            </if>
            <if test="residence != null">
                #{residence,jdbcType=INTEGER},
            </if>
            <if test="residencedate != null">
                #{residencedate,jdbcType=DATE},
            </if>
            <if test="address != null">
                #{address,jdbcType=VARCHAR},
            </if>
            <if test="photo != null">
                #{photo,jdbcType=INTEGER},
            </if>
            <if test="flownum != null">
                #{flownum,jdbcType=VARCHAR},
            </if>
            <if test="photoback != null">
                #{photoback,jdbcType=VARCHAR},
            </if>
            <if test="birthday != null">
                #{birthday,jdbcType=TIMESTAMP},
            </if>
            <if test="fingerprint != null">
                #{fingerprint,jdbcType=INTEGER},
            </if>
            <if test="busitype != null">
                #{busitype,jdbcType=VARCHAR},
            </if>
            <if test="drilicnum != null">
                #{drilicnum,jdbcType=VARCHAR},
            </if>
            <if test="perdritype != null">
                #{perdritype,jdbcType=VARCHAR},
            </if>
            <if test="fstdrilicdate != null">
                #{fstdrilicdate,jdbcType=TIMESTAMP},
            </if>
            <if test="traintype != null">
                #{traintype,jdbcType=VARCHAR},
            </if>
            <if test="applydate != null">
                #{applydate,jdbcType=TIMESTAMP},
            </if>
            <if test="completetime != null">
                #{completetime,jdbcType=INTEGER},
            </if>
            <if test="recordtype != null">
                #{recordtype,jdbcType=INTEGER},
            </if>
            <if test="applyexam != null">
                #{applyexam,jdbcType=INTEGER},
            </if>
            <if test="applystatus != null">
                #{applystatus,jdbcType=INTEGER},
            </if>
            <if test="applytype != null">
                #{applytype,jdbcType=INTEGER},
            </if>
            <if test="contract != null">
                #{contract,jdbcType=VARCHAR},
            </if>
            <if test="operate != null">
                #{operate,jdbcType=INTEGER},
            </if>
            <if test="errorcode != null">
                #{errorcode,jdbcType=INTEGER},
            </if>
            <if test="message != null">
                #{message,jdbcType=VARCHAR},
            </if>
            <if test="utime != null">
                #{utime,jdbcType=TIMESTAMP},
            </if>
            <if test="ltime != null">
                #{ltime,jdbcType=TIMESTAMP},
            </if>
            <if test="cuid != null">
                #{cuid,jdbcType=INTEGER},
            </if>
            <if test="muid != null">
                #{muid,jdbcType=INTEGER},
            </if>
            <if test="ctime != null">
                #{ctime,jdbcType=TIMESTAMP},
            </if>
            <if test="mtime != null">
                #{mtime,jdbcType=TIMESTAMP},
            </if>
            <if test="photourl != null">
                #{photourl,jdbcType=VARCHAR},
            </if>
            <if test="fingerprinturl != null">
                #{fingerprinturl,jdbcType=VARCHAR},
            </if>
            <if test="trainmethod != null">
                #{trainmethod,jdbcType=VARCHAR},
            </if>
            <if test="classid != null">
                #{classid,jdbcType=INTEGER},
            </if>
            <if test="payway != null">
                #{payway,jdbcType=INTEGER},
            </if>
            <if test="paytype != null">
                #{paytype,jdbcType=INTEGER},
            </if>
            <if test="payremark != null">
                #{payremark,jdbcType=VARCHAR},
            </if>
            <if test="paydate != null">
                #{paydate,jdbcType=TIMESTAMP},
            </if>
            <if test="paystatus != null">
                #{paystatus,jdbcType=INTEGER},
            </if>
            <if test="activityid != null">
                #{activityid,jdbcType=INTEGER},
            </if>
            <if test="submoney != null">
                #{submoney,jdbcType=DECIMAL},
            </if>
            <if test="posmoney != null">
                #{posmoney,jdbcType=DECIMAL},
            </if>
            <if test="cashmoney != null">
                #{cashmoney,jdbcType=DECIMAL},
            </if>
            <if test="contractmoney != null">
                #{contractmoney,jdbcType=DECIMAL},
            </if>
            <if test="isvalid != null">
                #{isvalid,jdbcType=INTEGER},
            </if>
            <if test="areaid != null">
                #{areaid,jdbcType=INTEGER},
            </if>
            <if test="storeid != null">
                #{storeid,jdbcType=INTEGER},
            </if>
            <if test="checktime != null">
                #{checktime,jdbcType=TIMESTAMP},
            </if>
            <if test="checkstatus != null">
                #{checkstatus,jdbcType=INTEGER},
            </if>
            <if test="bussource != null">
                #{bussource,jdbcType=INTEGER},
            </if>
            <if test="isinternal != null">
                #{isinternal,jdbcType=INTEGER},
            </if>
            <if test="infosource != null">
                #{infosource,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="billname != null">
                #{billname,jdbcType=VARCHAR},
            </if>
            <if test="billnum != null">
                #{billnum,jdbcType=VARCHAR},
            </if>
            <if test="billtype != null">
                #{billtype,jdbcType=INTEGER},
            </if>
            <if test="posnum != null">
                #{posnum,jdbcType=VARCHAR},
            </if>
            <if test="couponnum != null">
                #{couponnum,jdbcType=VARCHAR},
            </if>
            <if test="couponmoney != null">
                #{couponmoney,jdbcType=DECIMAL},
            </if>
            <if test="signmoney != null">
                #{signmoney,jdbcType=DECIMAL},
            </if>
            <if test="carddate != null">
                #{carddate,jdbcType=TIMESTAMP},
            </if>
            <if test="recuid != null">
                #{recuid,jdbcType=INTEGER},
            </if>
            <if test="recname != null">
                #{recname,jdbcType=VARCHAR},
            </if>
            <if test="stabletime != null">
                #{stabletime,jdbcType=TIMESTAMP},
            </if>
            <if test="etabletime != null">
                #{etabletime,jdbcType=TIMESTAMP},
            </if>
            <if test="learnstatus != null">
                #{learnstatus,jdbcType=INTEGER},
            </if>
            <if test="islocal != null">
                #{islocal,jdbcType=INTEGER},
            </if>
            <if test="iccard != null">
                #{iccard,jdbcType=VARCHAR},
            </if>
            <if test="cname != null">
                #{cname,jdbcType=VARCHAR},
            </if>
            <if test="mname != null">
                #{mname,jdbcType=VARCHAR},
            </if>
            <if test="reccoachid != null">
                #{reccoachid,jdbcType=INTEGER},
            </if>
            <if test="reccoachname != null">
                #{reccoachname,jdbcType=VARCHAR},
            </if>
            <if test="channel != null">
                #{channel,jdbcType=INTEGER},
            </if>
            <if test="learncard != null">
                #{learncard,jdbcType=VARCHAR},
            </if>
            <if test="xid != null">
                #{xid,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="cn.com.liliyun.student.model.Student">
        update t_student
        <set>
            <if test="stunum != null">
                stunum = #{stunum,jdbcType=VARCHAR},
            </if>
            <if test="inscode != null">
                inscode = #{inscode,jdbcType=CHAR},
            </if>
            <if test="cardtype != null">
                cardtype = #{cardtype,jdbcType=VARCHAR},
            </if>
            <if test="idcard != null">
                idcard = #{idcard,jdbcType=VARCHAR},
            </if>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                sex = #{sex,jdbcType=VARCHAR},
            </if>
            <if test="qq != null">
                qq = #{qq,jdbcType=VARCHAR},
            </if>
            <if test="height != null">
                height = #{height,jdbcType=INTEGER},
            </if>
            <if test="nationality != null">
                nationality = #{nationality,jdbcType=INTEGER},
            </if>
            <if test="phone != null">
                phone = #{phone,jdbcType=VARCHAR},
            </if>
            <if test="residence != null">
                residence = #{residence,jdbcType=INTEGER},
            </if>
            <if test="residencedate != null">
                residencedate = #{residencedate,jdbcType=DATE},
            </if>
            <if test="address != null">
                address = #{address,jdbcType=VARCHAR},
            </if>
            <if test="photo != null">
                photo = #{photo,jdbcType=INTEGER},
            </if>
            <if test="flownum != null">
                flownum = #{flownum,jdbcType=VARCHAR},
            </if>
            <if test="photoback != null">
                photoback = #{photoback,jdbcType=VARCHAR},
            </if>
            <if test="birthday != null">
                birthday = #{birthday,jdbcType=TIMESTAMP},
            </if>
            <if test="fingerprint != null">
                fingerprint = #{fingerprint,jdbcType=INTEGER},
            </if>
            <if test="busitype != null">
                busitype = #{busitype,jdbcType=VARCHAR},
            </if>
            <if test="drilicnum != null">
                drilicnum = #{drilicnum,jdbcType=VARCHAR},
            </if>
            <if test="perdritype != null">
                perdritype = #{perdritype,jdbcType=VARCHAR},
            </if>
            <if test="fstdrilicdate != null">
                fstdrilicdate = #{fstdrilicdate,jdbcType=TIMESTAMP},
            </if>
            <if test="traintype != null">
                traintype = #{traintype,jdbcType=VARCHAR},
            </if>
            <if test="applydate != null">
                applydate = #{applydate,jdbcType=TIMESTAMP},
            </if>
            <if test="completetime != null">
                completetime = #{completetime,jdbcType=INTEGER},
            </if>
            <if test="recordtype != null">
                recordtype = #{recordtype,jdbcType=INTEGER},
            </if>
            <if test="applyexam != null">
                applyexam = #{applyexam,jdbcType=INTEGER},
            </if>
            <if test="applystatus != null">
                applystatus = #{applystatus,jdbcType=INTEGER},
            </if>
            <if test="applytype != null">
                applytype = #{applytype,jdbcType=INTEGER},
            </if>
            <if test="contract != null">
                contract = #{contract,jdbcType=VARCHAR},
            </if>
            <if test="operate != null">
                operate = #{operate,jdbcType=INTEGER},
            </if>
            <if test="errorcode != null">
                errorcode = #{errorcode,jdbcType=INTEGER},
            </if>
            <if test="message != null">
                message = #{message,jdbcType=VARCHAR},
            </if>
            <if test="utime != null">
                utime = #{utime,jdbcType=TIMESTAMP},
            </if>
            <if test="ltime != null">
                ltime = #{ltime,jdbcType=TIMESTAMP},
            </if>
            <if test="cuid != null">
                cuid = #{cuid,jdbcType=INTEGER},
            </if>
            <if test="muid != null">
                muid = #{muid,jdbcType=INTEGER},
            </if>
            <if test="ctime != null">
                ctime = #{ctime,jdbcType=TIMESTAMP},
            </if>
            <if test="mtime != null">
                mtime = #{mtime,jdbcType=TIMESTAMP},
            </if>
            <if test="photourl != null">
                photourl = #{photourl,jdbcType=VARCHAR},
            </if>
            <if test="fingerprinturl != null">
                fingerprinturl = #{fingerprinturl,jdbcType=VARCHAR},
            </if>
            <if test="trainmethod != null">
                trainmethod = #{trainmethod,jdbcType=VARCHAR},
            </if>
            <if test="classid != null">
                classid = #{classid,jdbcType=INTEGER},
            </if>
            <if test="payway != null">
                payway = #{payway,jdbcType=INTEGER},
            </if>
            <if test="paytype != null">
                paytype = #{paytype,jdbcType=INTEGER},
            </if>
            <if test="payremark != null">
                payremark = #{payremark,jdbcType=VARCHAR},
            </if>
            <if test="paydate != null">
                paydate = #{paydate,jdbcType=TIMESTAMP},
            </if>
            <if test="paystatus != null">
                paystatus = #{paystatus,jdbcType=INTEGER},
            </if>
            <if test="activityid != null">
                activityid = #{activityid,jdbcType=INTEGER},
            </if>
            <if test="submoney != null">
                submoney = #{submoney,jdbcType=DECIMAL},
            </if>
            <if test="posmoney != null">
                posmoney = #{posmoney,jdbcType=DECIMAL},
            </if>
            <if test="cashmoney != null">
                cashmoney = #{cashmoney,jdbcType=DECIMAL},
            </if>
            <if test="contractmoney != null">
                contractmoney = #{contractmoney,jdbcType=DECIMAL},
            </if>
            <if test="signmoney != null">
                signmoney = #{signmoney,jdbcType=DECIMAL},
            </if>
            <if test="isvalid != null">
                isvalid = #{isvalid,jdbcType=INTEGER},
            </if>
            <if test="areaid != null">
                areaid = #{areaid,jdbcType=INTEGER},
            </if>
            <if test="storeid != null">
                storeid = #{storeid,jdbcType=INTEGER},
            </if>
            <if test="checktime != null">
                checktime = #{checktime,jdbcType=TIMESTAMP},
            </if>
            <if test="checkstatus != null">
                checkstatus = #{checkstatus,jdbcType=INTEGER},
            </if>
            <if test="bussource != null">
                bussource = #{bussource,jdbcType=INTEGER},
            </if>
            <if test="isinternal != null">
                isinternal = #{isinternal,jdbcType=INTEGER},
            </if>
            <if test="infosource != null">
                infosource = #{infosource,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="billname != null">
                billname = #{billname,jdbcType=VARCHAR},
            </if>
            <if test="billnum != null">
                billnum = #{billnum,jdbcType=VARCHAR},
            </if>
            <if test="billtype != null">
                billtype = #{billtype,jdbcType=INTEGER},
            </if>
            <if test="posnum != null">
                posnum = #{posnum,jdbcType=VARCHAR},
            </if>
            <if test="couponnum != null">
                couponnum = #{couponnum,jdbcType=VARCHAR},
            </if>
            <if test="couponmoney != null">
                couponmoney = #{couponmoney,jdbcType=DECIMAL},
            </if>
            <if test="carddate != null">
                carddate = #{carddate,jdbcType=TIMESTAMP},
            </if>
            <if test="recuid != null">
                recuid = #{recuid,jdbcType=INTEGER},
            </if>
            <if test="recname != null">
                recname = #{recname,jdbcType=VARCHAR},
            </if>
            <if test="stabletime != null">
                stabletime = #{stabletime,jdbcType=TIMESTAMP},
            </if>
            <if test="etabletime != null">
                etabletime = #{etabletime,jdbcType=TIMESTAMP},
            </if>
            <if test="learnstatus != null">
                learnstatus = #{learnstatus,jdbcType=INTEGER},
            </if>
            <if test="islocal != null">
                islocal = #{islocal,jdbcType=INTEGER},
            </if>
            <if test="iccard != null">
                iccard = #{iccard,jdbcType=VARCHAR},
            </if>
            <if test="cname != null">
                cname = #{cname,jdbcType=VARCHAR},
            </if>
            <if test="mname != null">
                mname = #{mname,jdbcType=VARCHAR},
            </if>
            <if test="reccoachid != null">
                reccoachid = #{reccoachid,jdbcType=INTEGER},
            </if>
            <if test="reccoachname != null">
                reccoachname = #{reccoachname,jdbcType=VARCHAR},
            </if>
            <if test="channel != null">
                channel = #{channel,jdbcType=INTEGER},
            </if>
            <if test="learncard != null">
                learncard = #{learncard,jdbcType=VARCHAR},
            </if>
            <if test="xid != null">
                xid = #{xid,jdbcType=INTEGER},
            </if>
        </set>
        where
        <choose>
            <when test="idcard != null">
                idcard = #{idcard,jdbcType=VARCHAR}
            </when>
            <otherwise>
                id = #{id,jdbcType=INTEGER}
            </otherwise>
        </choose>
    </update>
    <update id="updateByPrimaryKey" parameterType="cn.com.liliyun.student.model.Student">
		 update t_student
        set stunum = #{stunum,jdbcType=VARCHAR},
          inscode = #{inscode,jdbcType=CHAR},
          cardtype = #{cardtype,jdbcType=VARCHAR},
          idcard = #{idcard,jdbcType=VARCHAR},
          name = #{name,jdbcType=VARCHAR},
          sex = #{sex,jdbcType=VARCHAR},
          qq = #{qq,jdbcType=VARCHAR},
          height = #{height,jdbcType=INTEGER},
          nationality = #{nationality,jdbcType=INTEGER},
          phone = #{phone,jdbcType=VARCHAR},
          residence = #{residence,jdbcType=INTEGER},
          residencedate = #{residencedate,jdbcType=DATE},
          address = #{address,jdbcType=VARCHAR},
          photo = #{photo,jdbcType=INTEGER},
          flownum = #{flownum,jdbcType=VARCHAR},
          photoback = #{photoback,jdbcType=VARCHAR},
          birthday = #{birthday,jdbcType=TIMESTAMP},
          fingerprint = #{fingerprint,jdbcType=INTEGER},
          busitype = #{busitype,jdbcType=VARCHAR},
          drilicnum = #{drilicnum,jdbcType=VARCHAR},
          perdritype = #{perdritype,jdbcType=VARCHAR},
          fstdrilicdate = #{fstdrilicdate,jdbcType=TIMESTAMP},
          traintype = #{traintype,jdbcType=VARCHAR},
          applydate = #{applydate,jdbcType=TIMESTAMP},
          completetime = #{completetime,jdbcType=INTEGER},
          recordtype = #{recordtype,jdbcType=INTEGER},
          applyexam = #{applyexam,jdbcType=INTEGER},
          applystatus = #{applystatus,jdbcType=INTEGER},
          applytype = #{applytype,jdbcType=INTEGER},
          contract = #{contract,jdbcType=VARCHAR},
          operate = #{operate,jdbcType=INTEGER},
          errorcode = #{errorcode,jdbcType=INTEGER},
          message = #{message,jdbcType=VARCHAR},
          utime = #{utime,jdbcType=TIMESTAMP},
          ltime = #{ltime,jdbcType=TIMESTAMP},
          cuid = #{cuid,jdbcType=INTEGER},
          muid = #{muid,jdbcType=INTEGER},
          ctime = #{ctime,jdbcType=TIMESTAMP},
          mtime = #{mtime,jdbcType=TIMESTAMP},
          photourl = #{photourl,jdbcType=VARCHAR},
          fingerprinturl = #{fingerprinturl,jdbcType=VARCHAR},
          trainmethod = #{trainmethod,jdbcType=VARCHAR},
          classid = #{classid,jdbcType=INTEGER},
          payway = #{payway,jdbcType=INTEGER},
          paytype = #{paytype,jdbcType=INTEGER},
          payremark = #{payremark,jdbcType=VARCHAR},
          paydate = #{paydate,jdbcType=TIMESTAMP},
          paystatus = #{paystatus,jdbcType=INTEGER},
          activityid = #{activityid,jdbcType=INTEGER},
          submoney = #{submoney,jdbcType=DECIMAL},
          posmoney = #{posmoney,jdbcType=DECIMAL},
          cashmoney = #{cashmoney,jdbcType=DECIMAL},
          contractmoney = #{contractmoney,jdbcType=DECIMAL},
          isvalid = #{isvalid,jdbcType=INTEGER},
          areaid = #{areaid,jdbcType=INTEGER},
          storeid = #{storeid,jdbcType=INTEGER},
          checktime = #{checktime,jdbcType=TIMESTAMP},
          checkstatus = #{checkstatus,jdbcType=INTEGER},
          bussource = #{bussource,jdbcType=INTEGER},
          isinternal = #{isinternal,jdbcType=INTEGER},
          infosource = #{infosource,jdbcType=INTEGER},
          remark = #{remark,jdbcType=VARCHAR},
          billname = #{billname,jdbcType=VARCHAR},
          billnum = #{billnum,jdbcType=VARCHAR},
          billtype = #{billtype,jdbcType=INTEGER},
          posnum = #{posnum,jdbcType=VARCHAR},
          couponnum = #{couponnum,jdbcType=VARCHAR},
          couponmoney = #{couponmoney,jdbcType=DECIMAL},
          signmoney = #{signmoney,jdbcType=DECIMAL},
          carddate = #{carddate,jdbcType=TIMESTAMP},
          recuid = #{recuid,jdbcType=INTEGER},
          recname = #{recname,jdbcType=VARCHAR},
          stabletime = #{stabletime,jdbcType=TIMESTAMP},
          etabletime = #{etabletime,jdbcType=TIMESTAMP},
          learnstatus = #{learnstatus,jdbcType=INTEGER},
          islocal = #{islocal,jdbcType=INTEGER},
          iccard = #{iccard,jdbcType=VARCHAR},
          cname = #{cname,jdbcType=VARCHAR},
          mname = #{mname,jdbcType=VARCHAR},
          reccoachid = #{reccoachid,jdbcType=INTEGER},
          reccoachname = #{reccoachname,jdbcType=VARCHAR},
          channel = #{channel,jdbcType=INTEGER},
          learncard = #{learncard,jdbcType=VARCHAR},
          xid = #{xid,jdbcType=INTEGER}
        where id = #{id,jdbcType=INTEGER}
	</update>

    <update id="updateLearnstatus" parameterType="cn.com.liliyun.student.model.Student">
		update t_student
		set learnstatus = #{learnstatus}
		where id = #{id,jdbcType=INTEGER}
	</update>

    <select id="selectStudentInIds" resultType="cn.com.liliyun.student.model.Student">
        select
        <include refid="Base_Column_List"/>
        from t_student s where id in (${stunum}-1) <!-- 添加-1，确保参数为null或空字符串的时候不报错 -->
    </select>

    <select id="selectStudentExport" resultType="cn.com.liliyun.theory.dto.TheoryStudentExport">
        select
        <include refid="Theory_Export_Column"/>
        from t_student s where id in
        (
        select studentId from t_theory_student
        where
        theoryId = #{theoryid}
        <if test="storeid != null">
            and storeId = #{storeid}
        </if>
        )
    </select>

    <select id="selectTheoryStudents" parameterType="cn.com.liliyun.student.model.Student"
            resultType="cn.com.liliyun.student.model.Student">
        select
        <include refid="Base_Column_List"/>
        from t_student where areaid = #{areaid} and storeid = #{storeid} 
        <!-- and applyexam = 2 and applystatus = 1 --> <!-- 学员状态值确定后再修改 -->
        and id not in (select studentId from t_theory_student where theoryId =
        #{theoryid})
        <if test="name != null and name != ''">
            and name like concat('%',#{name},'%')
        </if>
        <if test="idcard != null and idcard != ''">
            and idcard like concat('%',#{idcard},'%')
        </if>
    </select>

    <select id="selectCoachList" parameterType="cn.com.liliyun.student.model.CoachStudent"
            resultType="cn.com.liliyun.student.model.Student">
        select

        id, stunum, inscode, cardtype, idcard, name, sex, qq, height,
        nationality, phone,
        residence, residencedate, address, photo, photoback, birthday, fingerprint,
        busitype,
        drilicnum, perdritype, fstdrilicdate, traintype, applydate, completetime,
        recordtype,
        applyexam, applytype, contract, operate, errorcode, message, utime, ltime,
        a.cuid,
        muid, a.ctime, a.mtime, photourl, fingerprinturl, trainmethod, classid,
        payway, paytype,
        payremark, paydate, paystatus, contractmoney, a.isvalid, areaid, storeid, checktime,
        checkstatus,
        bussource, isinternal, infosource, remark, billname, billnum, billtype, posnum,
        xid,
        carddate, recname, flownum, stabletime, etabletime, learnstatus, islocal,b.cuid
        as assignuserid,b.ctime as assigntime

        from t_student a join t_coach_student b on a.id=b.studentid
        where 1=1
        <if test="coachid != null">
            and b.coachid = #{coachid}
        </if>
        <if test="name != null and name !=''">
            and a.name = #{name}
        </if>
        order by a.id
    </select>

    <update id="updateBatch" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            update t_student
            <set>
                <if test="item.learncard != null">
                    learncard = #{item.learncard,jdbcType=VARCHAR},
                </if>
                <if test="item.photoback != null">
                    photoback = #{item.photoback,jdbcType=VARCHAR},
                </if>
                <if test="item.iccard != null">
                    iccard = #{item.iccard,jdbcType=VARCHAR},
                </if>
                <if test="item.flownum != null">
                    flownum = #{item.flownum,jdbcType=VARCHAR},
                </if>
                <if test="item.applyexam != null">
                    applyexam = #{item.applyexam,jdbcType=INTEGER},
                </if>
                <if test="item.applystatus != null">
                    applystatus = #{item.applystatus,jdbcType=INTEGER},
                </if>
            </set>
            where
            <choose>
                <when test="item.idcard != null">
                    idcard = #{item.idcard,jdbcType=VARCHAR}
                </when>
                <otherwise>
                    id = #{item.id,jdbcType=INTEGER}
                </otherwise>
            </choose>
        </foreach>
    </update>

	<select id="selectApplyStat" parameterType="cn.com.liliyun.student.dto.StudentApplyStat"
		resultType="cn.com.liliyun.student.dto.StudentApplyStat">
		<!-- 这里学员金额默认是元，以后再统一修改  -->
		select areaid, storeid, classid, ifnull(contractmoney,0) contractmoney, ifnull(cashmoney,0) + ifnull(posmoney,0) applymoney 
		from t_student 
		where ifnull(cashmoney,0) + ifnull(posmoney,0) > 0
		<if test="areaid != null">
			and areaid = #{areaid}
		</if>
		<if test="classid != null">
			and classid = #{classid}
		</if>
		<if test="applydatetop != null">
    		and #{applydatetop,jdbcType=TIMESTAMP} > date(applydate)
    	</if>
    	<if test="applydatelow != null">
    		and applydate >= #{applydatelow,jdbcType=TIMESTAMP}
    	</if>
	</select>

    <select id="getCount" resultType="int" parameterType="cn.com.liliyun.student.model.Student" >
        select count(1) from t_student
    </select>

    <select id="getCountBy7Days" resultType="cn.com.liliyun.student.dto.CountDTO" parameterType="cn.com.liliyun.student.model.Student">
        select DATE_FORMAT(date_sub(now(), interval 6 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 6 day))
        union all
        select DATE_FORMAT(date_sub(now(), interval 5 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 5 day))
        union all
        select DATE_FORMAT(date_sub(now(), interval 4 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 4 day))
        union all
        select DATE_FORMAT(date_sub(now(), interval 3 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 3 day))
        union all
        select DATE_FORMAT(date_sub(now(), interval 2 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 2 day))
        union all
        select DATE_FORMAT(date_sub(now(), interval 1 day),'%Y-%m-%d') as date ,count(1) as count from t_student where DATE(applydate) = date(date_sub(now(), interval 1 day))
        union all
        select DATE_FORMAT(now(),'%Y-%m-%d') as date,count(1) as count from t_student where DATE(applydate) = Date(now())
    </select>

</mapper>