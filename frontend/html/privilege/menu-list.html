<table id="menu-datagrid" class="table table-bordered"></table>
<script type="text/javascript">
	var menu_list = {
		list(){ 
			$.CurrentNavtab.find('#menu-datagrid').datagrid({
				showToolbar: false,
				paging: false,
				columns: [
					{ name: 'name', label: '菜单名称', align: 'center' },
					{ name: 'icon', label: 'ICON', align: 'center', render: menu_list.menu_icon },
					{ name: 'type', label: '菜单类型', align: 'center', type: 'select', items: menu_list.menu_type },
					{ name: 'menulevel', label: '菜单层级', align: 'center', type: 'select', items: menu_list.level_type },
					{ name: 'enable', label: '是否启用', align: 'center', type: 'select', items: menu_list.enable_type },
					{ name: 'menuorder', label: '菜单排序', align: 'center' },
					{ name: 'url', label: 'URL请求', align: 'center' },
					{ name: 'ajax', label: 'ajax请求', align: 'center' },
					{ name: 'privilege', label: '权限编码', align: 'center' }
				],
				keys: {
					children: 'children'
				},
				fieldSortable: false,
				columnShowhide: false,
				filterThead: true,
				columnMenu: false,
				isTree: 'name',
				contextMenuH: false,
				height: '98%',
				addLocation: 'first',
				showToolbar: true,
				toolbarItem: 'add,|,edit ,|,cancel,|, del,|, save',
				treeOptions: {
					key: 'id',
					expandAll: true,
					add: true
				},
				afterSave: function() {
					$.CurrentNavtab.find('#menu-datagrid').datagrid('refresh', true)
				},
				afterDelete: function() {
					$.CurrentNavtab.find('#menu-datagrid').datagrid('refresh', true)
				},
				editUrl: config.openBasePath + 'privilege/editPrivilege',
				editType: 'POST',
				delPK: 'id',
				delUrl: config.openBasePath + 'privilege/delPrivilege',
				dataUrl: config.openBasePath + 'privilege/allPrivilege'
			})
		},
		menu_type() {
			return [{ '1': '菜单' }, { '0': '接口' }, { '2': '按钮' }]
		},
		menu_type() {
			return [{ '1': '菜单' }, { '0': '接口' }, { '2': '按钮' }]
		},
		enable_type() {
			return [{ '1': '启用' }, { '0': '停用' }]
		},
		level_type() {
			return [{ '2': '三级菜单' }, { '0': '一级菜单' }, { '1': '二级菜单' }, { '3': '四级按钮' }]
		},
		menu_icon(value, data) {
			if(value) {
				return '<i onclick="menu_list.change_icon(' + data.id + ')" class="fa fa-' + value + '"></i>'
			} else {
				return '<i onclick="menu_list.change_icon(' + data.id + ')" >设置ICON</i>'
			}
			//return '<i onclick="" class="fa fa-'+value+'"></i>'
		},
		change_icon(id) {
			var data = [
			{name: 'address-book'},
				{name: 'address-book-o'},
				{name: 'address-card'},
				{name: 'address-card-o'},
				{name: 'adjust'},
				{name: 'american-sign-language-interpreting'},
				{name: 'anchor'},
				{name: 'archive'},
				{name: 'area-chart'},
				{name: 'arrows'},
				{name: 'arrows-h'},
				{name: 'arrows-v'},
				{name: 'asl-interpreting'},
				{name: 'assistive-listening-systems'},
				{name: 'asterisk'},
				{name: 'at'},
				{name: 'audio-description'},
				{name: 'automobile'},
				{name: 'balance-scale'},
				{name: 'ban'},
				{name: 'bank'},
				{name: 'bar-chart'},
				{name: 'bar-chart-o'},
				{name: 'barcode'},
				{name: 'bars'},
				{name: 'bath'},
				{name: 'bathtub'},
				{name: 'battery'},
				{name: 'battery-0'},
				{name: 'battery-1'},
				{name: 'battery-2'},
				{name: 'battery-3'},
				{name: 'battery-4'},
				{name: 'battery-empty'},
				{name: 'battery-full'},
				{name: 'battery-half'},
				{name: 'battery-quarter'},
				{name: 'battery-three-quarters'},
				{name: 'bed'},
				{name: 'beer'},
				{name: 'bell'},
				{name: 'bell-o'},
				{name: 'bell-slash'},
				{name: 'bell-slash-o'},
				{name: 'bicycle'},
				{name: 'binoculars'},
				{name: 'birthday-cake'},
				{name: 'blind'},
				{name: 'bluetooth'},
				{name: 'bluetooth-b'},
				{name: 'bolt'},
				{name: 'bomb'},
				{name: 'book'},
				{name: 'bookmark'},
				{name: 'bookmark-o'},
				{name: 'braille'},
				{name: 'briefcase'},
				{name: 'bug'},
				{name: 'building'},
				{name: 'building-o'},
				{name: 'bullhorn'},
				{name: 'bullseye'},
				{name: 'bus'},
				{name: 'cab'},
				{name: 'calculator'},
				{name: 'calendar'},
				{name: 'calendar-check-o'},
				{name: 'calendar-minus-o'},
				{name: 'calendar-o'},
				{name: 'calendar-plus-o'},
				{name: 'calendar-times-o'},
				{name: 'camera'},
				{name: 'camera-retro'},
				{name: 'car'},
				{name: 'caret-square-o-down'},
				{name: 'caret-square-o-left'},
				{name: 'caret-square-o-right'},
				{name: 'caret-square-o-up'},
				{name: 'cart-arrow-down'},
				{name: 'cart-plus'},
				{name: 'cc'},
				{name: 'certificate'},
				{name: 'check'},
				{name: 'check-circle'},
				{name: 'check-circle-o'},
				{name: 'check-square'},
				{name: 'check-square-o'},
				{name: 'child'},
				{name: 'circle'},
				{name: 'circle-o'},
				{name: 'circle-o-notch'},
				{name: 'circle-thin'},
				{name: 'clock-o'},
				{name: 'clone'},
				{name: 'close'},
				{name: 'cloud'},
				{name: 'cloud-download'},
				{name: 'cloud-upload'},
				{name: 'code'},
				{name: 'code-fork'},
				{name: 'coffee'},
				{name: 'cog'},
				{name: 'cogs'},
				{name: 'comment'},
				{name: 'comment-o'},
				{name: 'commenting'},
				{name: 'commenting-o'},
				{name: 'comments'},
				{name: 'comments-o'},
				{name: 'compass'},
				{name: 'copyright'},
				{name: 'creative-commons'},
				{name: 'credit-card'},
				{name: 'credit-card-alt'},
				{name: 'crop'},
				{name: 'crosshairs'},
				{name: 'cube'},
				{name: 'cubes'},
				{name: 'cutlery'},
				{name: 'dashboard'},
				{name: 'database'},
				{name: 'deaf'},
				{name: 'deafness'},
				{name: 'desktop'},
				{name: 'diamond'},
				{name: 'dot-circle-o'},
				{name: 'download'},
				{name: 'drivers-license'},
				{name: 'drivers-license-o'},
				{name: 'edit'},
				{name: 'ellipsis-h'},
				{name: 'ellipsis-v'},
				{name: 'envelope'},
				{name: 'envelope-o'},
				{name: 'envelope-open'},
				{name: 'envelope-open-o'},
				{name: 'envelope-square'},
				{name: 'eraser'},
				{name: 'exchange'},
				{name: 'exclamation'},
				{name: 'exclamation-circle'},
				{name: 'exclamation-triangle'},
				{name: 'external-link'},
				{name: 'external-link-square'},
				{name: 'eye'},
				{name: 'eye-slash'},
				{name: 'eyedropper'},
				{name: 'fax'},
				{name: 'feed'},
				{name: 'female'},
				{name: 'fighter-jet'},
				{name: 'file-archive-o'},
				{name: 'file-audio-o'},
				{name: 'file-code-o'},
				{name: 'file-excel-o'},
				{name: 'file-image-o'},
				{name: 'file-movie-o'},
				{name: 'file-pdf-o'},
				{name: 'file-photo-o'},
				{name: 'file-picture-o'},
				{name: 'file-powerpoint-o'},
				{name: 'file-sound-o'},
				{name: 'file-video-o'},
				{name: 'file-word-o'},
				{name: 'file-zip-o'},
				{name: 'film'},
				{name: 'filter'},
				{name: 'fire'},
				{name: 'fire-extinguisher'},
				{name: 'flag'},
				{name: 'flag-checkered'},
				{name: 'flag-o'},
				{name: 'flash'},
				{name: 'flask'},
				{name: 'folder'},
				{name: 'folder-o'},
				{name: 'folder-open'},
				{name: 'folder-open-o'},
				{name: 'frown-o'},
				{name: 'futbol-o'},
				{name: 'gamepad'},
				{name: 'gavel'},
				{name: 'gear'},
				{name: 'gears'},
				{name: 'gift'},
				{name: 'glass'},
				{name: 'globe'},
				{name: 'graduation-cap'},
				{name: 'group'},
				{name: 'hand-grab-o'},
				{name: 'hand-lizard-o'},
				{name: 'hand-paper-o'},
				{name: 'hand-peace-o'},
				{name: 'hand-pointer-o'},
				{name: 'hand-rock-o'},
				{name: 'hand-scissors-o'},
				{name: 'hand-spock-o'},
				{name: 'hand-stop-o'},
				{name: 'handshake-o'},
				{name: 'hard-of-hearing'},
				{name: 'hashtag'},
				{name: 'hdd-o'},
				{name: 'headphones'},
				{name: 'heart'},
				{name: 'heart-o'},
				{name: 'heartbeat'},
				{name: 'history'},
				{name: 'home'},
				{name: 'hotel'},
				{name: 'hourglass'},
				{name: 'hourglass-1'},
				{name: 'hourglass-2'},
				{name: 'hourglass-3'},
				{name: 'hourglass-end'},
				{name: 'hourglass-half'},
				{name: 'hourglass-o'},
				{name: 'hourglass-start'},
				{name: 'i-cursor'},
				{name: 'id-badge'},
				{name: 'id-card'},
				{name: 'id-card-o'},
				{name: 'image'},
				{name: 'inbox'},
				{name: 'industry'},
				{name: 'info'},
				{name: 'info-circle'},
				{name: 'institution'},
				{name: 'key'},
				{name: 'keyboard-o'},
				{name: 'language'},
				{name: 'laptop'},
				{name: 'leaf'},
				{name: 'legal'},
				{name: 'lemon-o'},
				{name: 'level-down'},
				{name: 'level-up'},
				{name: 'life-bouy'},
				{name: 'life-buoy'},
				{name: 'life-ring'},
				{name: 'life-saver'},
				{name: 'lightbulb-o'},
				{name: 'line-chart'},
				{name: 'location-arrow'},
				{name: 'lock'},
				{name: 'low-vision'},
				{name: 'magic'},
				{name: 'magnet'},
				{name: 'mail-forward'},
				{name: 'mail-reply'},
				{name: 'mail-reply-all'},
				{name: 'male'},
				{name: 'map'},
				{name: 'map-marker'},
				{name: 'map-o'},
				{name: 'map-pin'},
				{name: 'map-signs'},
				{name: 'meh-o'},
				{name: 'microchip'},
				{name: 'microphone'},
				{name: 'microphone-slash'},
				{name: 'minus'},
				{name: 'minus-circle'},
				{name: 'minus-square'},
				{name: 'minus-square-o'},
				{name: 'mobile'},
				{name: 'mobile-phone'},
				{name: 'money'},
				{name: 'moon-o'},
				{name: 'mortar-board'},
				{name: 'motorcycle'},
				{name: 'mouse-pointer'},
				{name: 'music'},
				{name: 'navicon'},
				{name: 'newspaper-o'},
				{name: 'object-group'},
				{name: 'object-ungroup'},
				{name: 'paint-brush'},
				{name: 'paper-plane'},
				{name: 'paper-plane-o'},
				{name: 'paw'},
				{name: 'pencil'},
				{name: 'pencil-square'},
				{name: 'pencil-square-o'},
				{name: 'percent'},
				{name: 'phone'},
				{name: 'phone-square'},
				{name: 'photo'},
				{name: 'picture-o'},
				{name: 'pie-chart'},
				{name: 'plane'},
				{name: 'plug'},
				{name: 'plus'},
				{name: 'plus-circle'},
				{name: 'plus-square'},
				{name: 'plus-square-o'},
				{name: 'podcast'},
				{name: 'power-off'},
				{name: 'print'},
				{name: 'puzzle-piece'},
				{name: 'qrcode'},
				{name: 'question'},
				{name: 'question-circle'},
				{name: 'question-circle-o'},
				{name: 'quote-left'},
				{name: 'quote-right'},
				{name: 'random'},
				{name: 'recycle'},
				{name: 'refresh'},
				{name: 'registered'},
				{name: 'remove'},
				{name: 'reorder'},
				{name: 'reply'},
				{name: 'reply-all'},
				{name: 'retweet'},
				{name: 'road'},
				{name: 'rocket'},
				{name: 'rss'},
				{name: 'rss-square'},
				{name: 's15'},
				{name: 'search'},
				{name: 'search-minus'},
				{name: 'search-plus'},
				{name: 'send'},
				{name: 'send-o'},
				{name: 'server'},
				{name: 'share'},
				{name: 'share-alt'},
				{name: 'share-alt-square'},
				{name: 'share-square'},
				{name: 'share-square-o'},
				{name: 'shield'},
				{name: 'ship'},
				{name: 'shopping-bag'},
				{name: 'shopping-basket'},
				{name: 'shopping-cart'},
				{name: 'shower'},
				{name: 'sign-in'},
				{name: 'sign-language'},
				{name: 'sign-out'},
				{name: 'signal'},
				{name: 'signing'},
				{name: 'sitemap'},
				{name: 'sliders'},
				{name: 'smile-o'},
				{name: 'snowflake-o'},
				{name: 'soccer-ball-o'},
				{name: 'sort'},
				{name: 'sort-alpha-asc'},
				{name: 'sort-alpha-desc'},
				{name: 'sort-amount-asc'},
				{name: 'sort-amount-desc'},
				{name: 'sort-asc'},
				{name: 'sort-desc'},
				{name: 'sort-down'},
				{name: 'sort-numeric-asc'},
				{name: 'sort-numeric-desc'},
				{name: 'sort-up'},
				{name: 'space-shuttle'},
				{name: 'spinner'},
				{name: 'spoon'},
				{name: 'square'},
				{name: 'square-o'},
				{name: 'star'},
				{name: 'star-half'},
				{name: 'star-half-empty'},
				{name: 'star-half-full'},
				{name: 'star-half-o'},
				{name: 'star-o'},
				{name: 'sticky-note'},
				{name: 'sticky-note-o'},
				{name: 'street-view'},
				{name: 'suitcase'},
				{name: 'sun-o'},
				{name: 'support'},
				{name: 'tablet'},
				{name: 'tachometer'},
				{name: 'tag'},
				{name: 'tags'},
				{name: 'tasks'},
				{name: 'taxi'},
				{name: 'television'},
				{name: 'terminal'},
				{name: 'thermometer'},
				{name: 'thermometer-0'},
				{name: 'thermometer-1'},
				{name: 'thermometer-2'},
				{name: 'thermometer-3'},
				{name: 'thermometer-4'},
				{name: 'thermometer-empty'},
				{name: 'thermometer-full'},
				{name: 'thermometer-half'},
				{name: 'thermometer-quarter'},
				{name: 'thermometer-three-quarters'},
				{name: 'thumb-tack'},
				{name: 'thumbs-down'},
				{name: 'thumbs-o-down'},
				{name: 'thumbs-o-up'},
				{name: 'thumbs-up'},
				{name: 'ticket'},
				{name: 'times'},
				{name: 'times-circle'},
				{name: 'times-circle-o'},
				{name: 'times-rectangle'},
				{name: 'times-rectangle-o'},
				{name: 'tint'},
				{name: 'toggle-down'},
				{name: 'toggle-left'},
				{name: 'toggle-off'},
				{name: 'toggle-on'},
				{name: 'toggle-right'},
				{name: 'toggle-up'},
				{name: 'trademark'},
				{name: 'trash'},
				{name: 'trash-o'},
				{name: 'tree'},
				{name: 'trophy'},
				{name: 'truck'},
				{name: 'tty'},
				{name: 'tv'},
				{name: 'umbrella'},
				{name: 'universal-access'},
				{name: 'university'},
				{name: 'unlock'},
				{name: 'unlock-alt'},
				{name: 'unsorted'},
				{name: 'upload'},
				{name: 'user'},
				{name: 'user-circle'},
				{name: 'user-circle-o'},
				{name: 'user-o'},
				{name: 'user-plus'},
				{name: 'user-secret'},
				{name: 'user-times'},
				{name: 'users'},
				{name: 'vcard'},
				{name: 'vcard-o'},
				{name: 'video-camera'},
				{name: 'volume-control-phone'},
				{name: 'volume-down'},
				{name: 'volume-off'},
				{name: 'volume-up'},
				{name: 'warning'},
				{name: 'wheelchair'},
				{name: 'wheelchair-alt'},
				{name: 'wifi'},
				{name: 'window-close'},
				{name: 'window-close-o'},
				{name: 'window-maximize'},
				{name: 'window-minimize'},
				{name: 'window-restore'},
				{name: 'wrench'},
				{name: 'automobile'},
				{name: 'bicycle'},
				{name: 'bus'},
				{name: 'car'},
				{name: 'cab'},
				{name: 'plane'},
				{name: 'rocket'},
				{name: 'file'},
				{name: 'cog'},
				{name: 'check-square'},
				{name: 'check-square-o'},
				{name: 'circle'},
				{name: 'circle-o'},
				{name: 'plus-square-o'},
				{name: 'plus-square'},
				{name: 'minus-square-o'},
				{name: 'minus-square'},
				{name: 'area-chart'},
				{name: 'bar-chart'},
				{name: 'bar-chart-o'},
				{name: 'line-chart'},
				{name: 'pie-chart'},
				{name: 'rotate-left '},
				{name: 'repeat'},
				{name: 'table'},
				{name: 'th'},
				{name: 'th-large'},
				{name: 'th-list'},
			]
			BJUI.findgrid({
				group: 'obj',
				dialogOptions: { title: '查找职业' },
				empty: '',
				gridOptions: {
					local: 'local',
					data: data,
					tableWidth:'95%',
					filterThead:true,
					columns: [
						{ name: 'name', label: '名称', align: 'center',width:'30%' },
						{ name: 'name', label: '图形', align: 'center',width:'30%', render: function(value) { return '<i class="fa fa-' + value + '"></i>'; } },
					]
				},
				afterSelect: function(data) {
					BJUI.ajax('doajax', {
						url: config.openBasePath + 'privilege/editPrivilege',
						type: 'post',
						data: {
							id: id,
							icon: data.name
						},
						loadingmask: true,
						okCallback: function() {
							$.CurrentNavtab.find('#menu-datagrid').datagrid('reload') //刷新
							return true
						}
					});
				}
			})

		}
	}
	menu_list.list();
</script>